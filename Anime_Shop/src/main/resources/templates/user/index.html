<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/user/layout/layoutUser.html :: dynamic(~{::body})}">
<body>
	<!-- Begin Slider Area -->
	<script type="text/javascript" src="https://ahachat.com/customer-chats/customer_chat_8wTYl7XOrM63b2778d27441.js"></script>
	
	<div class="slider-area">
		<div class="kenne-element-carousel home-slider arrow-style"
			data-slick-options='{
                "slidesToShow": 1,
                "slidesToScroll": 1,
                "infinite": true,
                "arrows": true,
                "dots": false,
                "autoplay" : true,
                "fade" : true,
                "autoplaySpeed" : 7000,
                "pauseOnHover" : false,
                "pauseOnFocus" : false
                }'
			data-slick-responsive='[
                {"breakpoint":768, "settings": {
                "slidesToShow": 1
                }},
                {"breakpoint":575, "settings": {
                "slidesToShow": 1
                }}
            ]'>
			<div class="slide-item bg-1 animation-style-01"
				style="background-image: url('https://i.pinimg.com/originals/01/e9/79/01e979e7ea349aa25f784e56b36a62eb.gif'); min-height: 750px;">
				<div class="slider-progress"></div>
				<div class="container">
					<div class="slide-content">
						<h2 class="text-info" style="font-weight: bold">
							Mặt hàng Anime <br /> Khám phá xu hướng
						</h2>
						<div class="slide-btn">
							<a class="kenne-btn" th:href="@{/anime-shop/shop}">Mua Ngay</a>
						</div>
					</div>
				</div>
			</div>
			<div class="slide-item bg-2 animation-style-01"
				style="background-image: url('https://i.pinimg.com/originals/35/a0/08/35a00855387ee7de3d4fb178e352eaca.gif'); min-height: 750px;">
				<div class="slider-progress"></div>
				<div class="container">
					<div class="slide-content">
						<h2 class="text-info" style="font-weight: bold">
							Mặt hàng Anime <br /> Khám phá xu hướng
						</h2>
						<div class="slide-btn">
							<a class="kenne-btn" th:href="@{/anime-shop/shop}">Mua Ngay</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Slider Area End Here -->

	<!-- Begin Banner Area -->
	<div class="banner-area">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<div class="banner-item img-hover_effect">
						<div class="banner-img">
							<a href="javascrip:void(0)"> <img
								th:src="@{/user/assets/images/banner/1-3.png}" height="170px"
								class="rounded" alt="Banner" />
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="banner-item img-hover_effect">
						<div class="banner-img">
							<a href="javascrip:void(0)"> <img
								th:src="@{/user/assets/images/banner/1-2.png}" height="170px"
								class="rounded" alt="Banner" />
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="banner-item img-hover_effect">
						<div class="banner-img">
							<a href="javascrip:void(0)"> <img class="rounded"
								th:src="@{/user/assets/images/banner/1-1.png}" height="170px"
								alt="Banner" />
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Banner Area End Here -->

	<!-- Begin Product Area -->
	<div class="product-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h3>Sản phẩm mới nhất</h3>
						<div class="product-arrow"></div>
					</div>
				</div>
				<div class="col-lg-12">
					<div class="kenne-element-carousel product-slider slider-nav"
						data-slick-options='{
                    "slidesToShow": 4,
                    "slidesToScroll": 1,
                    "infinite": false,
                    "arrows": true,
                    "dots": false,
                    "spaceBetween": 30,
                    "appendArrows": ".product-arrow"
                    }'
						data-slick-responsive='[
                    {"breakpoint":992, "settings": {
                    "slidesToShow": 3
                    }},
                    {"breakpoint":768, "settings": {
                    "slidesToShow": 2
                    }},
                    {"breakpoint":575, "settings": {
                    "slidesToShow": 1
                    }}
                ]'>
						<div class="product-item" th:each="newItem: ${productNews}">
							<div class="single-product" style="height: 450px;">
								<div class="product-img">
									<a th:href="@{|/anime-shop/shop/${newItem.slug}|}"> <img
										class="primary-img"
										th:src="@{|/assets/images/${newItem.getImages().get(0).getName()}|}"
										height="250px" alt="Kenne's Product Image" /> <img
										class="secondary-img"
										th:src="@{|/assets/images/${newItem.getImages().get(1).getName()}|}"
										height="250px" alt="Kenne's Product Image" />
									</a> <span th:if="${newItem.quantity > 0}" class="sticker-2">Mới</span>
									<span th:unless="${newItem.quantity > 0}" class="sticker-2">[[${@Utils.outOfStock}]]</span>
									<div class="add-actions">
										<ul>
											<li class="quick-view-btn" data-toggle="modal"
												data-target="#exampleModalCenter"><a
												href="javascript:void(0)" data-toggle="tooltip"
												data-placement="right" title="Quick View"><i
													class="ion-ios-eye"></i></a></li>
											<li th:if="${newItem.quantity > 0}"><a
												th:attr="onclick='addToCart(\'' + ${newItem.id} + '\')'"
												data-toggle="tooltip" data-placement="right"
												title="Add To cart"><i class="ion-bag"></i></a></li>
										</ul>
									</div>
								</div>
								<div class="product-content">
									<div class="product-desc_info">
										<h3 class="product-name">
											<a th:href="@{|/anime-shop/shop/${newItem.slug}|}"
												th:text="${newItem.name}"></a>
										</h3>
										<div class="price-box">
											<span class="new-price"
												th:text="${#numbers.formatDecimal(newItem.price, 1, 'POINT', 3, 'POINT') + ' VNĐ'}"></span>
										</div>
										<div class="rating-box">
											<ul>
												<li><i class="ion-ios-star"></i></li>
												<li><i class="ion-ios-star"></i></li>
												<li><i class="ion-ios-star"></i></li>
												<li class="silver-color"><i class="ion-ios-star-half"></i>
												</li>
												<li class="silver-color"><i
													class="ion-ios-star-outline"></i></li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Product Area End Here -->

	<!-- Begin Banner Area Two -->
	<div class="banner-area banner-area-2">
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<div class="banner-item img-hover_effect">
						<div class="banner-img">
							<a href="javascrip:void(0)"> <img class="rounded"
								src="https://images.alphacoders.com/598/598846.jpg" width="50%"
								height="600px" alt="Banner" />
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="banner-item img-hover_effect">
						<div class="banner-img">
							<a href="javascrip:void(0)"> <img class="rounded" width="50%"
								height="600px"
								src="https://wallpapersflix.com/anime/wp-content/uploads/2022/05/Demon-Slayer-Wallpaper-Ultra-HD.png"
								alt="Banner" />
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Banner Area Two End Here -->

	<!-- Begin Product Tab Area -->
	<div class="product-tab_area mb-3">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h3>Sản phẩm được quan tâm</h3>
						<div class="product-tab">
							<ul class="nav product-menu">
							</ul>
						</div>
					</div>
				</div>
				<div class="col-lg-12">
					<div class="shop-product-wrap grid gridview-3 row">
						<div class="col-md-3" th:each="item: ${productMostViews}">
							<div class="product-item">
								<div class="single-product" style="height: 450px;">
									<div class="product-img">
										<a th:href="@{|/anime-shop/shop/${item.slug}|}"> <img
											class="primary-img"
											th:src="@{|/assets/images/${item.getImages().get(0).getName()}|}"
											height="250px" alt="Kenne's Product Image" /> <img
											class="secondary-img"
											th:src="@{|/assets/images/${item.getImages().get(1).getName()}|}"
											height="250px" alt="Kenne's Product Image" />
										</a> <span th:if="${item.quantity > 0}" class="sticker-2">Còn
											hàng</span> <span th:unless="${item.quantity > 0}"
											class="sticker-2 bg-warning text-danger font-weight-bold">[[${@Utils.outOfStock}]]</span>
										<div class="add-actions">
											<ul>
												<li class="quick-view-btn" data-toggle="modal"
													data-target="#exampleModalCenter"><a
													th:href="@{|/anime-shop/shop/${item.slug}|}"
													data-toggle="tooltip" data-placement="right"
													title="Chi tiết"><i class="ion-ios-eye"></i></a></li>
												<li th:if="${item.quantity > 0}"><a
													th:attr="onclick='addToCart(\'' + ${item.id} + '\')'"
													data-toggle="tooltip" data-placement="right"
													title="Thêm vào giỏ"><i class="ion-bag"></i></a></li>
											</ul>
										</div>
									</div>
									<div class="product-content">
										<div class="product-desc_info">
											<h3 class="product-name">
												<a th:href="@{|/anime-shop/shop/${item.slug}|}"
													th:text="${item.name}"></a>
											</h3>
											<div class="price-box">
												<span class="new-price"
													th:text="${#numbers.formatDecimal(item.price, 1, 'POINT', 3, 'POINT') + ' VNĐ'}"></span>
											</div>
											<div class="rating-box">
												<ul>
													<li><i class="ion-ios-star"></i></li>
													<li><i class="ion-ios-star"></i></li>
													<li><i class="ion-ios-star"></i></li>
													<li><i class="ion-ios-star"></i></li>
													<li class="silver-color"><i class="ion-ios-star-half"></i>
													</li>
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="kenne-paginatoin-area">
								<div class="row">
									<div class="col-lg-12">
										<ul class="kenne-pagination-box primary-color">
											<a class="px-4" th:href="@{/anime-shop/shop}">Xem tất cả</a>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	<!-- Product Tab Area End Here -->
	<script>
		const addToCart = (productId) =>{
	   			const url = '/api/cart/update?productId=' + productId + '&quantity=1&isReplace=false';
				$.ajax({
					url : url,
					type : 'GET',
					dataType : 'json',
					success : function(data) {
						$('#headerTotalPrice').text(formatCurrency(data.totalPrice));
						$('#headerTotalQuantity1').text(data.totalQuantity);
						$('#headerTotalQuantity2').text(data.totalQuantity);
					},
					error : function(error) {
						console.log(error);
						alert("Thêm giỏ hàng thất bại!");
					}
				});
	   		}
	   		
	   	const formatCurrency = (x) => {
				return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + ' VNĐ';
			}
	</script>
</body>
</html>

