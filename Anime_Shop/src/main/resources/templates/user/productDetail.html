<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/user/layout/layoutUser.html :: dynamic(~{::body})}">
<body>
	<!-- Begin Kenne's Breadcrumb Area -->
	<div class="breadcrumb-area">
		<div class="container">
			<div class="breadcrumb-content">
				<h2 style="color: white">ANIME STORE</h2>
				<ul>
					<li style="color: white"><a style="color: white"
						th:href="@{/anime-shop/index}">Trang chủ</a></li>
					<li style="color: white" class="active">Chi tiết sản phẩm</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- Kenne's Breadcrumb Area End Here -->

	<!-- Begin Kenne's Single Product Area -->
	<div class="sp-area">
		<div class="container">
			<div class="sp-nav">
				<div class="row">
					<div class="col-lg-6">
						<div class="sp-img_area">
							<div
								class="sp-img_slider slick-img-slider kenne-element-carousel"
								data-slick-options='{
                                "slidesToShow": 1,
                                "arrows": false,
                                "fade": true,
                                "draggable": false,
                                "swipe": false,
                                "asNavFor": ".sp-img_slider-nav"
                                }'>
								<div class="single-slide red zoom" th:each="item: ${images}">
									<img th:src="@{|/assets/images/${item.name}|}" width="100%"
										height="500px;" alt="Kenne's Product Image">
								</div>
							</div>
							<div
								class="sp-img_slider-nav slick-slider-nav kenne-element-carousel arrow-style-2 arrow-style-3"
								data-slick-options='{
                                "slidesToShow": 3,
                                "asNavFor": ".sp-img_slider",
                                "focusOnSelect": true,
                                "arrows" : true,
                                "spaceBetween": 30
                                }'
								data-slick-responsive='[
                                        {"breakpoint":1501, "settings": {"slidesToShow": 3}},
                                        {"breakpoint":1200, "settings": {"slidesToShow": 2}},
                                        {"breakpoint":992, "settings": {"slidesToShow": 4}},
                                        {"breakpoint":768, "settings": {"slidesToShow": 3}},
                                        {"breakpoint":575, "settings": {"slidesToShow": 2}}
                                    ]'>
								<div class="single-slide red" th:each="item: ${images}">
									<img th:src="@{|/assets/images/${item.name}|}" height="130px"
										alt="Kenne's Product Thumnail">
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-6">
						<div class="sp-content">
							<div class="sp-heading">
								<h5 style="font-size: 30px;" th:text="${product.name}"></h5>
							</div>
							<span class="new-price font-weight-bold"
								th:text="${#numbers.formatDecimal(product.price, 1, 'POINT', 3, 'POINT') + ' VNĐ'}"></span>
							<div class="rating-box">
								<ul>
									<li><i class="ion-android-star"></i></li>
									<li><i class="ion-android-star"></i></li>
									<li><i class="ion-android-star"></i></li>
									<li class="silver-color"><i class="ion-android-star"></i></li>
									<li class="silver-color"><i class="ion-android-star"></i></li>
								</ul>
							</div>
							<div class="sp-essential_stuff mt-2">

								<ul>
									<li><b style="font-size: 20px;">Thông số sản phẩm</b></li>
									<li>Nhân vật: [[${product.nameMain}]]</li>
									<li>Series: [[${product.series}]]</li>
									<li>Chất liệu: [[${product.material}]]</li>
									<li>Tình trạng: [[${product.status}]]</li>
									<li>Kích thước: [[${product.size}]]</li>
									<li>Còn: [[${product.quantity}]] hàng</li>
									<li th:if="${product.description != null}">Mô tả:
										[[${product.description}]]</li>
								</ul>
							</div>
							<div class="quantity">
								<label>Số lượng</label>
								<div class="cart-plus-minus">
									<input class="cart-plus-minus-box" value="1" type="text"
										id="quantityCart">
									<div class="dec qtybutton">
										<i class="fa fa-angle-down"></i>
									</div>
									<div class="inc qtybutton">
										<i class="fa fa-angle-up"></i>
									</div>
								</div>
							</div>
							<div class="qty-btn_area">
								<ul>
									<li th:if="${product.quantity > 0}"><a
										style="cursor: pointer;" class="qty-cart_btn"
										th:attr="onclick='addToCart(\'' + ${product.id} + '\')'">Thêm
											giỏ hàng</a></li>
									<li th:unless="${product.quantity > 0}"><a
										class="qty-cart_btn"
										style="pointer-events: none; cursor: default; opacity: 0.6;"
										href="cart.html">[[${@Utils.outOfStock}]]</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Kenne's Single Product Area End Here -->

	<!-- Begin Product Tab Area Two -->
	<div class="product-tab_area-2">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="sp-product-tab_nav">
						<div class="product-tab">
							<ul class="nav product-menu">
								<li><a class="active" data-toggle="tab" href="#reviews"><span>Đánh
											giá(0)</span></a></li>
							</ul>
						</div>
						<div class="tab-content uren-tab_content">
							<div id="reviews" class="tab-pane active show" role="tabpanel">
								<form class="form-horizontal" id="form-review">
									<div id="review">
										<table class="table table-striped table-bordered">
											<tbody>
												<tr>
													<td style="width: 50%;"><strong>Customer</strong></td>
													<td class="text-right">26/10/19</td>
												</tr>
												<tr>
													<td colspan="2">
														<p>Good product! Thank you very much</p>
														<div class="rating-box">
															<ul>
																<li><i class="ion-android-star"></i></li>
																<li><i class="ion-android-star"></i></li>
																<li><i class="ion-android-star"></i></li>
																<li><i class="ion-android-star"></i></li>
																<li><i class="ion-android-star"></i></li>
															</ul>
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<h2>Write a review</h2>
									<div class="form-group required">
										<div class="col-sm-12 p-0">
											<label>Your Email <span class="required">*</span></label> <input
												class="review-input" type="email" name="con_email"
												id="con_email" required>
										</div>
									</div>
									<div class="form-group required second-child">
										<div class="col-sm-12 p-0">
											<label class="control-label">Share your opinion</label>
											<textarea class="review-textarea" name="con_message"
												id="con_message"></textarea>
											<div class="help-block">
												<span class="text-danger">Note:</span> HTML is not
												translated!
											</div>
										</div>
									</div>
									<div class="form-group last-child required">
										<div class="col-sm-12 p-0">
											<div class="your-opinion">
												<label>Your Rating</label> <span> <select
													class="star-rating">
														<option value="1">1</option>
														<option value="2">2</option>
														<option value="3">3</option>
														<option value="4">4</option>
														<option value="5">5</option>
												</select>
												</span>
											</div>
										</div>
										<div class="kenne-btn-ps_right">
											<button class="kenne-btn">Continue</button>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Product Tab Area Two End Here -->

	<!-- Begin Product Area -->
	<div class="product-area pb-90">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section-title">
						<h3>Sản phẩm cùng loại</h3>
						<div class="product-arrow"></div>
					</div>
				</div>
				<div class="col-lg-12">
					<div class="kenne-element-carousel product-slider slider-nav"
						data-slick-options='{
                        "slidesToShow": 4,
                        "slidesToScroll": 1,
                        "infinite": false,
                        "arrows": true,
                        "dots": false,
                        "spaceBetween": 30,
                        "appendArrows": ".product-arrow"
                        }'
						data-slick-responsive='[
                        {"breakpoint":992, "settings": {
                        "slidesToShow": 3
                        }},
                        {"breakpoint":768, "settings": {
                        "slidesToShow": 2
                        }},
                        {"breakpoint":575, "settings": {
                        "slidesToShow": 1
                        }}
                    ]'>

						<div class="product-item"
							th:each="item: ${product.category.products}">
							<div class="single-product" style="height: 450px;">
								<div class="product-img">
									<a th:href="@{|/anime-shop/shop/${item.slug}|}"> <img
										class="primary-img"
										th:src="@{|/assets/images/${item.getImages().get(0).getName()}|}"
										height="250px" alt="Kenne's Product Image"> <img
										class="secondary-img"
										th:src="@{|/assets/images/${item.getImages().get(1).getName()}|}"
										height="250px" alt="Kenne's Product Image">
									</a> <span class="sticker-2">Liên quan</span>
									<div class="add-actions">
										<ul>
											<li class="quick-view-btn" data-toggle="modal"
												data-target="#exampleModalCenter"><a
												th:href="@{|/anime-shop/shop/${item.slug}|}"
												data-toggle="tooltip" data-placement="right"
												title="Chi tiết"><i class="ion-ios-eye"></i></a></li>
											<li><a
												th:attr="onclick='addToCart(\'' + ${item.id} + '\')'"
												data-toggle="tooltip" data-placement="right"
												title="Thêm vào giỏ"><i class="ion-bag"></i></a></li>
										</ul>
									</div>
								</div>
								<div class="product-content">
									<div class="product-desc_info">
										<h3 class="product-name">
											<a th:href="@{|/anime-shop/shop/${item.slug}|}"
												th:text="${item.name}"></a>
										</h3>
										<div class="price-box">
											<span class="new-price"
												th:text="${#numbers.formatDecimal(item.price, 1, 'POINT', 3, 'POINT') + ' VNĐ'}"></span>
										</div>
										<div class="rating-box">
											<ul>
												<li><i class="ion-ios-star"></i></li>
												<li><i class="ion-ios-star"></i></li>
												<li><i class="ion-ios-star"></i></li>
												<li class="silver-color"><i class="ion-ios-star-half"></i></li>
												<li class="silver-color"><i
													class="ion-ios-star-outline"></i></li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>


					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Product Area End Here -->

	<script>
		const addToCart = (productId) =>{
			var inputQuantity = '#quantityCart';
			var quantity = $(inputQuantity).val();
	   			const url = '/api/cart/update?productId=' + productId + '&quantity=' + quantity + '&isReplace=false';
				$.ajax({
					url : url,
					type : 'GET',
					dataType : 'json',
					success : function(data) {
						$('#headerTotalPrice').text(formatCurrency(data.totalPrice));
						$('#headerTotalQuantity1').text(data.totalQuantity);
						$('#headerTotalQuantity2').text(data.totalQuantity);
						if(quantity>1){
							var inputQuantityRefresh = '#quantityCart';
							$(inputQuantityRefresh).val(1);
						}
					},
					error : function(error) {
						console.log(error);
						alert("Thêm giỏ hàng thất bại!");
					}
				});
	   		}
	   		
	   	const formatCurrency = (x) => {
				return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + ' VNĐ';
			}
	</script>
</body>
</html>